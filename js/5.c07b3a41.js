(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"28bf":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"river-width bg-grey-1 q-mt-md river-table"},[n("div",{staticClass:"q-pa-md full-width"},[n("h5",{staticClass:"q-mt-none q-mb-sm"},[t._v("Comments")]),n("q-form",{on:{submit:t.postComment}},[n("div",{staticClass:"row q-mb-sm"},[n("q-input",{staticClass:"bg-grey-2",attrs:{filled:"",required:"",autogrow:"",placeholder:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),n("div",{staticClass:"full-width"},[n("q-input",{staticClass:"bg-grey-2 q-mr-sm",attrs:{filled:"",type:"textarea",required:"",placeholder:"Type comment here"},model:{value:t.newComment,callback:function(e){t.newComment=e},expression:"newComment"}})],1),n("div",{staticClass:"row"},[n("q-space"),n("q-btn",{staticClass:"q-mt-lg full-width",attrs:{type:"submit",color:"accent"}},[t._v("submit")])],1)])],1),n("q-separator"),n("q-list",[t.comments.length?t._e():n("div",{staticClass:"text-center q-pa-lg"},[t._v("no comments")]),t._l(t.readyComments,(function(e){return n("q-item",{key:e.id,staticStyle:{"border-bottom":"1px solid rgba(0, 0, 0, 0.12)"}},[n("q-item-section",[n("q-item-label",{staticClass:"text-h5"},[t._v(t._s(e.name))]),n("q-item-label",{staticClass:"bg-grey-1 q-mb-md",attrs:{caption:""}},[t._v(t._s(e.create_date))]),n("q-item-label",{staticClass:"q-mb-lg",attrs:{lines:"10"},domProps:{innerHTML:t._s(e.text)}})],1)],1)})),this.currentPointer+this.limit<=this.commentCount?n("q-btn",{staticClass:"full-width text-center",on:{click:t.showMore}},[t._v("show more")]):t._e()],2)],1)},i=[],a=(n("fb6a"),n("e6cf"),n("bd4c")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},c=[],r=(n("c975"),n("5319"),{name:"TextToolsMixin",methods:{checkStr:function(t){let e=this.stripTags(t);return e=this.ytCheck(e),e=this.imageUrlCheck(e),e=this.unsplashUrlCheck(e),e=this.linkCheck(e),e},ytCheck:function(t){const e=t.match(/(http:|https:)?(\/\/)?(www\.)?(youtube.com|youtu.be)\/(watch|embed)?(\?v=|\/)?(\S+)?/),n='<iframe type="text/html" width="480" height="320" src="https://www.youtube.com/embed/embed_code_target" frameborder="0"></iframe>';return e?t.replace(e[0],(function(t,s){return n.replace("embed_code_target",e[7].split("&")[0])})):t},stripTags:function(t){return t.replaceAll("<script>","")},imageUrlCheck:function(t){const e=/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|gif|png)/gi,n=t.replace(e,(function(t){return'<img src="'+t+'" style="max-width:100%;" />'}));return n},unsplashUrlCheck:function(t){const e=/(https?:\/\/(.+?\.)?images.unsplash\.com(\/[A-Za-z0-9\-._~:?#[\]@!$&'()*+,;=]*)?)/g,n=t.replace(e,(function(t){return'<img src="'+t+'" style="max-width:100%;" />'}));return n},linkCheck:function(t){function e(t){const e=["youtube","youtu","images.unsplash",".jpg",".jpeg",".gif",".png",".webp"];for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return!0;return!1}const n=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)(?!png|gif|jpg)/g,s=t.replace(n,(function(t){return e(t)?t:'<a target="_blank" href="'+t+'" />'+t+"</a>"}));return s}}}),m=r,l=n("2877"),h=Object(l["a"])(m,o,c,!1,null,null,null),u=h.exports,p={name:"CommentsPage",created(){this.loadComments()},data(){return{comments:[],newComment:"",currentPointer:0,limit:5,commentCount:"",loaded:!1,name:""}},mixins:[u],computed:{readyComments:function(){return this.comments.map((t=>(t.text=this.checkStr(t.text),t.create_date=a["a"].formatDate(t.create_date,"MMM Do, YYYY hh:mm:ss"),t)))}},methods:{loadComments:function(){this.loaded||(this.getComments(),this.loaded=!0)},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},getComments:async function(){const t=`http://72.177.0.66:3000/comments/?filter[skip]=${this.currentPointer}&filter[limit]=${this.limit}&filter[order]=create_date%20DESC`,e=await this.$axios.get(t);this.comments=e.data,console.log("---------"),console.log(this.comments)},showMore:async function(){this.currentPointer=this.currentPointer+this.limit;const t=`http://72.177.0.66:3000/comments/?filter[skip]=${this.currentPointer}&filter[limit]=${this.limit}&filter[order]=create_date%20DESC`,e=await this.$axios.get(t);this.comments=this.comments.concat(e.data)},getCommentCount:async function(){const t="http://72.177.0.66:3000/comments/count",e=await this.$axios.get(t);this.commentCount=e.data.count},postComment:async function(){const t="http://72.177.0.66:3000/comments",e={name:this.name,text:this.newComment};e[this.entityType+"_id"]=this.entityId,await this.$axios.post(t,e,{headers:{Accept:"application/json"}}),this.newComment="",this.getComments(),this.getCommentCount()}}},d=p,f=n("0378"),g=n("27f9"),C=n("2c91"),b=n("9c40"),w=n("eb85"),_=n("1c1c"),y=n("66e5"),q=n("4074"),x=n("0170"),k=n("eebe"),v=n.n(k),$=Object(l["a"])(d,s,i,!1,null,null,null);e["default"]=$.exports;v()($,"components",{QForm:f["a"],QInput:g["a"],QSpace:C["a"],QBtn:b["a"],QSeparator:w["a"],QList:_["a"],QItem:y["a"],QItemSection:q["a"],QItemLabel:x["a"]})}}]);