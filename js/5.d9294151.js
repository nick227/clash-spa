(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"28bf":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"river-width bg-grey-1 q-mt-md river-table"},[s("div",{staticClass:"q-pa-md full-width"},[s("h5",{staticClass:"q-mt-none q-mb-sm"},[t._v("Comments")]),s("q-form",{on:{submit:t.postComment}},[s("div",{staticClass:"row q-mb-sm"},[s("q-input",{staticClass:"full-width",attrs:{filled:"",required:"",autogrow:"",placeholder:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),s("div",{staticClass:"full-width"},[s("q-input",{staticClass:"full-width",attrs:{filled:"",type:"textarea",required:"",placeholder:"Type comment here"},model:{value:t.newComment,callback:function(e){t.newComment=e},expression:"newComment"}})],1),s("div",{staticClass:"row"},[s("q-space"),s("q-btn",{staticClass:"q-mt-lg full-width",attrs:{type:"submit",color:"accent"}},[t._v("submit")])],1)])],1),s("q-separator"),s("q-list",[t.comments.length?t._e():s("div",{staticClass:"text-center q-pa-lg"},[t._v("no comments")]),t._l(t.readyComments,(function(e){return s("q-item",{key:e.id,staticClass:"q-pb-lg",staticStyle:{"border-bottom":"3px solid rgba(0, 0, 0, 0.12)"}},[s("q-item-section",[s("q-item-label",{staticClass:"text-h5"},[t._v(t._s(e.name))]),s("q-item-label",{staticClass:"bg-grey-1 q-mb-md",attrs:{caption:""}},[t._v(t._s(e.create_date))]),s("q-item-label",{staticClass:"q-mb-lg",attrs:{lines:"10"},domProps:{innerHTML:t._s(e.text)}}),s("InnerCommentComponent",{attrs:{parentId:e.id}})],1)],1)})),this.currentPointer+this.limit<=this.commentCount?s("q-btn",{staticClass:"full-width text-center",on:{click:t.showMore}},[t._v("show more")]):t._e()],2)],1)},a=[],i=(s("fb6a"),s("e6cf"),s("bd4c")),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div")},m=[],r=(s("c975"),s("5319"),{name:"TextToolsMixin",methods:{checkStr:function(t){let e=this.stripTags(t);return e=this.ytCheck(e),e=this.imageUrlCheck(e),e=this.unsplashUrlCheck(e),e=this.linkCheck(e),e},ytCheck:function(t){const e=t.match(/(http:|https:)?(\/\/)?(www\.)?(youtube.com|youtu.be)\/(watch|embed)?(\?v=|\/)?(\S+)?/),s='<iframe type="text/html" width="480" height="320" src="https://www.youtube.com/embed/embed_code_target" frameborder="0"></iframe>';return e?t.replace(e[0],(function(t,n){return s.replace("embed_code_target",e[7].split("&")[0])})):t},stripTags:function(t){return t.replaceAll("<script>","")},imageUrlCheck:function(t){const e=/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|gif|png)/gi,s=t.replace(e,(function(t){return'<img src="'+t+'" style="max-width:100%;" />'}));return s},unsplashUrlCheck:function(t){const e=/(https?:\/\/(.+?\.)?images.unsplash\.com(\/[A-Za-z0-9\-._~:?#[\]@!$&'()*+,;=]*)?)/g,s=t.replace(e,(function(t){return'<img src="'+t+'" style="max-width:100%;" />'}));return s},linkCheck:function(t){function e(t){const e=["youtube","youtu","images.unsplash",".jpg",".jpeg",".gif",".png",".webp"];for(let s=0;s<e.length;s++)if(t.indexOf(e[s])>-1)return!0;return!1}const s=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)(?!png|gif|jpg)/g,n=t.replace(s,(function(t){return e(t)?t:'<a target="_blank" href="'+t+'" />'+t+"</a>"}));return n}}}),c=r,l=s("2877"),h=Object(l["a"])(c,o,m,!1,null,null,null),p=h.exports,u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"river-width bg-grey-4 q-mt-md river-table"},[s("q-expansion-item",{attrs:{"expand-separator":"",icon:"message",label:"comments "+t.comments.length}},[s("q-form",{staticClass:"q-ma-lg",on:{submit:t.postComment}},[s("div",{staticClass:"full-width q-mb-sm"},[s("q-input",{staticClass:"full-width",attrs:{filled:"",required:"",autogrow:"",placeholder:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),s("div",{staticClass:"full-width"},[s("q-input",{staticClass:"bg-grey-4 full-width",attrs:{filled:"",type:"textarea",required:"",placeholder:"Type comment here"},model:{value:t.newComment,callback:function(e){t.newComment=e},expression:"newComment"}})],1),s("div",{staticClass:"row"},[s("q-space"),s("q-btn",{staticClass:"q-mt-lg full-width",attrs:{type:"submit",color:"accent"}},[t._v("submit")])],1)]),s("q-separator"),s("q-list",[t.comments.length?t._e():s("div",{staticClass:"text-center q-pa-lg"},[t._v("no comments")]),t._l(t.readyComments,(function(e){return s("q-item",{key:e.id,staticClass:"q-pa-lg",staticStyle:{"border-bottom":"1px solid rgba(0, 0, 0, 0.12)"}},[s("q-item-section",[s("q-item-label",{staticClass:"text-h5"},[t._v(t._s(e.name))]),s("q-item-label",{staticClass:"q-mb-sm",attrs:{caption:""}},[t._v(t._s(e.create_date))]),s("q-item-label",{staticClass:"q-mb-sm",attrs:{lines:"10"},domProps:{innerHTML:t._s(e.text)}})],1)],1)})),s("q-separator")],2)],1)],1)},d=[],C={props:["parentId"],name:"InnerCommentComponent.vue",components:{},mixins:[p],data(){return{comments:[],newComment:"",name:""}},computed:{readyComments:function(){return this.comments.map((t=>(t.text=this.checkStr(t.text),t.create_date=i["a"].formatDate(t.create_date,"MMM Do, YYYY hh:mm:ss"),t)))}},methods:{getComments:async function(){const t=`https://ming2-clash.herokuapp.com//comments/?filter={"where":{"parent_id":${this.parentId}}, "order":"create_date DESC"}`,e=await this.$axios.get(t);this.comments=e.data,console.log(t),console.log(this.comments)},postComment:async function(){const t="https://ming2-clash.herokuapp.com//comments",e={name:this.name,text:this.newComment,parent_id:this.parentId};await this.$axios.post(t,e,{headers:{Accept:"application/json"}}),this.newComment="",this.name="",this.getComments()}},created(){this.getComments()}},f=C,g=s("3b73"),b=s("0378"),w=s("27f9"),q=s("2c91"),_=s("9c40"),x=s("eb85"),v=s("1c1c"),y=s("66e5"),k=s("4074"),Q=s("0170"),I=s("eebe"),S=s.n(I),$=Object(l["a"])(f,u,d,!1,null,null,null),M=$.exports;S()($,"components",{QExpansionItem:g["a"],QForm:b["a"],QInput:w["a"],QSpace:q["a"],QBtn:_["a"],QSeparator:x["a"],QList:v["a"],QItem:y["a"],QItemSection:k["a"],QItemLabel:Q["a"]});var j={name:"CommentsPage",created(){this.loadComments()},components:{InnerCommentComponent:M},data(){return{comments:[],newComment:"",currentPointer:0,limit:5,commentCount:"",loaded:!1,name:""}},mixins:[p],computed:{readyComments:function(){return this.comments.map((t=>(t.text=this.checkStr(t.text),t.create_date=i["a"].formatDate(t.create_date,"MMM Do, YYYY hh:mm:ss"),t)))}},methods:{loadComments:function(){this.loaded||(this.getComments(),this.loaded=!0)},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},getComments:async function(){const t=`https://ming2-clash.herokuapp.com//comments/?filter={"where":{"parent_id":null}, "limit":${this.limit}, "order":"create_date DESC", "skip": ${this.currentPointer}}`,e=await this.$axios.get(t);this.comments=e.data},showMore:async function(){this.currentPointer=this.currentPointer+this.limit;const t=`https://ming2-clash.herokuapp.com//comments/?filter={"where":{"parent_id":null}, "limit":${this.limit}, "order":"create_date DESC", "skip": ${this.currentPointer}}`,e=await this.$axios.get(t);this.comments=this.comments.concat(e.data)},postComment:async function(){const t="https://ming2-clash.herokuapp.com//comments",e={name:this.name,text:this.newComment};await this.$axios.post(t,e,{headers:{Accept:"application/json"}}),this.newComment="",this.getComments()}}},P=j,A=Object(l["a"])(P,n,a,!1,null,null,null);e["default"]=A.exports;S()(A,"components",{QForm:b["a"],QInput:w["a"],QSpace:q["a"],QBtn:_["a"],QSeparator:x["a"],QList:v["a"],QItem:y["a"],QItemSection:k["a"],QItemLabel:Q["a"]})}}]);